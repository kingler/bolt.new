---
component: stores
description: Contains stores for managing state and data within the application
main-technologies:
  - TypeScript
  - Nanostores
  - WebContainer API
conventions:
  - Use Nanostores for state management
  - Follow TypeScript best practices
  - Ensure proper encapsulation and modularity
---

# Stores

This directory contains stores for managing state and data within the application. These stores define the structure and behavior of various elements within the application, enabling a cohesive and interactive user experience.

## Structure

- `chat.ts`: Store for managing chat-related state and interactions
- `editor.ts`: Store for managing editor state and document interactions
- `files.ts`: Store for managing file system state and operations
- `previews.ts`: Store for managing preview instances and their state
- `settings.ts`: Store for managing application settings and shortcuts
- `terminal.ts`: Store for managing terminal instances and their state
- `theme.ts`: Store for managing theme state and toggling between themes
- `workbench.ts`: Store for managing the overall workbench state and interactions

## Key Responsibilities

1. Defining the structure and behavior of application state
2. Ensuring proper state management and synchronization
3. Providing interfaces for interacting with various parts of the application
4. Managing the lifecycle and state of different components

## Development Guidelines

- Use Nanostores for state management
- Follow TypeScript best practices for type safety and code readability
- Ensure proper encapsulation and modularity in store implementations
- Use type hints and docstrings for better code readability

## Store Implementation

### chat.ts

This store manages the state and interactions related to the chat interface. It defines the structure and behavior of chat messages, user interactions, and assistant responses.

### editor.ts

This store manages the state of the editor, including the currently open documents, selected file, and scroll positions. It provides methods for updating document content, selecting files, and managing scroll positions.

### files.ts

This store manages the file system state and operations. It tracks the files and folders, handles file modifications, and synchronizes the state with the WebContainer. It provides methods for saving files, resetting modifications, and processing file system events.

### previews.ts

This store manages the state of preview instances, including their availability, readiness, and URLs. It listens for port events from the WebContainer and updates the state of previews accordingly.

### settings.ts

This store manages the application settings, including keyboard shortcuts. It defines the structure of shortcuts and provides methods for updating and subscribing to settings changes.

### terminal.ts

This store manages the state of terminal instances, including their visibility and attached processes. It provides methods for toggling the terminal, attaching terminals, and handling terminal resize events.

### theme.ts

This store manages the theme state and provides methods for toggling between dark and light themes. It initializes the theme based on persisted settings or default values and updates the theme attribute on the HTML element.

### workbench.ts

This store manages the overall state of the workbench, including the previews, files, editor, terminal, and artifacts. It provides methods for interacting with these components, saving files, and managing the state of the workbench.

## Usage Example
